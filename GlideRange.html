<!DOCTYPE html>
<html lang="en">
<!-- 
    Copyright (c) David S. Sherrill
    
    This file is part of Glide Range Map.

    Glide Range Map is free software: you can redistribute it and/or modify it under the terms 
    of the GNU General Public License as published by the Free Software Foundation, either
    version 3 of the License, or (at your option) any later version.

    Glide Range Map is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
    See the GNU General Public License for more details.

    You should have received a copy of the GNU General Public License along with Glide Range Map. 
    If not, see https://www.gnu.org/licenses/.
  -->

<head>

    <title>Glide Range Map version 1.1</title>
    <!-- 
        Change History
        Version 1.1.6
        All user inputs are saved in local storage and are restored
        when the page initializes

        Version 1.1.5
        * Simplified cicle management by using LayerGroups

        Version 1.1.4
        * Landing sites are displayed with the first entries in the CUP file on top,
          but Airports are still on top of grass strips, which are on top of landable fields.

        Version 1.1.3
        * Fixed the problem of inconsistent column labels in CUP files

        Version 1.1.2
        * Loads a default CUP file during initialization

        Version 1.1.1
        * Removed "Load file" and "Update" buttons; map now automatically updates when inputs change
        
        Version 1.1
        * Fixed problem with negative radius
        * Now reads CUP files with field elevation in feet or meters

        * Now discards tasks before parsing the CUP file by discarding 
          everything that follows the "-----Related Tasks-----" line
     -->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Glide Range Map - Visualize glider range based on altitude and glide ratio">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com https://cdn-geoweb.s3.amazonaws.com https://cdn.jsdelivr.net https://code.jquery.com https://cdnjs.cloudflare.com https://www.statcounter.com https://dssherrill.github.io; style-src 'self' 'unsafe-inline' https://unpkg.com https://cdn-geoweb.s3.amazonaws.com; img-src 'self' data: https://*.tile.openstreetmap.org https://*.basemaps.cartocdn.com https://c.statcounter.com https://api.mapbox.com; connect-src 'self' https://dssherrill.github.io https://nominatim.openstreetmap.org https://geocode.arcgis.com; font-src 'self' data:;">

    <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>

    <!-- CSS and JS files for Search Box -->
    <script src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>

    <script
        src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.js"></script>

    <link rel="stylesheet" type="text/css"
        href="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.css">

    <style>
        html * {
            font-family: Nunito, sans-serif;
        }

        html,
        body {
            height: 100%;
            margin: 0;
        }

        ul {
            padding-left: 20px;
        }

        .legend i {
            width: 10px;
            height: 10px;
            float: left;
            margin-right: 25px;
        }

        .leaflet-container {
            height: 600px;
            width: 1000px;
            max-width: 100%;
            max-height: 100%;
        }

        .leaflet-tooltip {
            position: absolute;
            padding: 6px;
            background-color: #fff;
            border: 2px solid #fff;
            border-radius: 5px;
            color: #222;
            white-space: nowrap;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            pointer-events: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 1.0);
        }

        g {
            opacity: 0.25;
        }
    </style>

</head>

<body>
    <div id="map" style="width: 1000px; height: 600px;" role="application" aria-label="Glide range map"></div>

    <div id="inputsDiv" style="margin: 5px;">
        <form id="glideParameters">
            <label for="glideRatioInput" style="margin: 12px">Glide Ratio</label> 
            <input type="number" value="20" min="1" max="100" step="0.1" id="glideRatioInput" 
                   name="glideRatioInput" aria-label="Glide ratio (1-100)" required />
            <br>
            <label for="altitudeInput" style="margin: 12px">Altitude MSL (ft)</label> 
            <input type="number" value="3500" min="0" max="50000" step="100" id="altitudeInput" 
                   name="altitudeInput" aria-label="Altitude above mean sea level in feet" required />
            <br>
            <label for="arrivalHeightInput" style="margin: 12px">Arrival Height (ft)</label> 
            <input type="number" value="1000" min="0" max="10000" step="100" id="arrivalHeightInput" 
                   name="arrivalHeightInput" aria-label="Minimum arrival height in feet" required />
        </form>
        <form id="loadFileForm" style="margin: 12px">
            <label for="csvFile">Load a CUP file:</label> 
            <input type="file" id="csvFile" accept=".cup" aria-label="Upload CUP waypoint file" />
        </form>

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"
            integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ=="
            crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
            integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
        <script src="jquery.csv.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>

        <script src="glideRange.js"></script>

        <!-- Default Statcounter code for Glide Range Map
             https://dssherrill.github.io/GlideRange.html -->
        <script type="text/javascript">
            var sc_project = 12731833;
            var sc_invisible = 1;
            var sc_security = "14d240a0"; 
        </script>
        <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
        <noscript>
            <div class="statcounter"><a title="Web Analytics
    Made Easy - Statcounter" href="https://statcounter.com/" target="_blank"><img class="statcounter"
                        src="https://c.statcounter.com/12731833/0/14d240a0/1/"
                        alt="Web Analytics Made Easy - Statcounter" referrerPolicy="no-referrer-when-downgrade"></a>
            </div>
        </noscript>
        <!-- End of Statcounter Code -->
    </div>
</body>

</html>