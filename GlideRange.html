<!DOCTYPE html>
<html lang="en">

<head>

    <title>Glide Range Map version 1.1.2</title>
    <!-- 
        Change History
        Version 1.1.2
        * Implemented code review recommendations:
          - Standardized variable declarations (var â†’ const/let)
          - Added comprehensive input validation and error handling
          - Added accessibility improvements (ARIA labels)
          - Updated Leaflet and jQuery to latest stable versions
          - Kept ESRI Leaflet at beta version for API compatibility
          - Added package.json for dependency management
          - Removed console.log statements from production code
          - Added file size and format validation
          - Improved user feedback with status messages
        
        Version 1.1.1
        * Removed "Load file" and "Update" buttons; map now automatically updates when inputs change
        
        Version 1.1
        * Fixed problem with negative radius
        * Now reads CUP files with field elevation in feet or meters

        * Now discards tasks before parsing the CUP file by discarding 
          everything that follows the "-----Related Tasks-----" line
     -->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>

    <!-- CSS and JS files for Search Box -->
    <script src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>

    <script
        src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.js"></script>

    <link rel="stylesheet" type="text/css"
        href="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.css">

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        .leaflet-container {
            height: 600px;
            width: 1000px;
            max-width: 100%;
            max-height: 100%;
        }
    </style>

    <style>
        g {
            opacity: 0.25;
        }
    </style>


</head>

<body>
    <form id="myForm">
        <label for="csvFile">Load CUP Waypoint File:</label>
        <input type="file" id="csvFile" accept=".cup" aria-label="Upload CUP waypoint file" />
        <span id="fileStatus" style="margin-left: 10px; color: #666;"></span>
    </form>

    <br>
    <form id="glideParameters">
        <div id="map" style="width: 1000px; height: 600px;"></div>

        <!-- <form id="options"> -->
        <label for="glideRatioInput">Glide Ratio</label> <input type="number" value="20" min="1" max="100" step="0.1" id="glideRatioInput"
            name="glideRatioInput" aria-label="Glide ratio (1-100)" required />
        <br>
        <label for="altitudeInput">Altitude AGL (ft)</label> <input type="number" value="3500" min="0" max="50000" step="100"
            id="altitudeInput" name="altitudeInput" aria-label="Altitude above ground level in feet (0-50000)" required />
        <br>
        <label for="arrivalHeightInput">Arrival Height (ft)</label> <input type="number" value="1000" min="0" max="10000" step="100"
            id="arrivalHeightInput" name="arrivalHeightInput" aria-label="Minimum arrival height in feet (0-10000)" required />
        <br>

        <div>
            <input class="messageCheckbox" type="checkbox" id="airports" name="fieldType" checked aria-label="Show airports">
            <label for="airports">Airports</label>
        </div>

        <div>
            <input class="messageCheckbox" type="checkbox" id="grassStrips" name="fieldType" aria-label="Show grass strips">
            <label for="grassStrips">Grass Strips</label>
        </div>

        <div>
            <input class="messageCheckbox" type="checkbox" id="landableFields" name="fieldType" aria-label="Show landable fields">
            <label for="landableFields">Landable Fields</label>
        </div>
    </form>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/lodash/4.17.21/lodash.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
        integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
    <script src="jquery.csv.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>

    <script src="glideRange.js"></script>

</body>
</html>